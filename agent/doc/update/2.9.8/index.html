<html>
<head>
<title>TourFX. Изменения в версии 2.9.8</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" /><meta http-equiv="cache-control" content="max-age=86400"/><link rel="stylesheet" media="screen" href="../../../../css/reset.css" />
<link rel="stylesheet" media="screen" href="../../../../css/doc.css" />
<link rel="icon" type="image/x-icon" href="../../../../images/favicon.ico" />
<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
</head>
<body>
<div class="content">
<div class="breadcrumb"><a href="../../../..">TourFX</a>&nbsp;&nbsp;<span class="breadcrumb-separator">&gt;</span>&nbsp;&nbsp;<a href="../..">Руководство пользователя</a>&nbsp;&nbsp;<span class="breadcrumb-separator">&gt;</span>&nbsp;&nbsp;<a href="..">﻿Обновление программы</a>&nbsp;&nbsp;<span class="breadcrumb-separator">&gt;</span>&nbsp;&nbsp;Изменения в версии 2.9.8</div>
<hr />

<h1>Изменения в версии 2.9.8</h1>

<ul>
<li><a href="#recommended-contract">Типовой договор</a></li>
<li><a href="#order-template-changes">Изменения в шаблоне договора</a></li>
<li><a href="#new-functions">Новые функции для шаблонов: склонение ФИО, склонение названий городов, определение пола</a></li>
<li><a href="#instant-template-publishing">Мгновенное обновление шаблонов документов на всех компьютерах в многопользовательской версии</a></li>
<li><a href="#invoice-changes">Изменения в Счете</a></li>
<li><a href="#block-access-to-reports">Опция закрытия доступа к отчетам</a></li>
</ul>

<a name="recommended-contract"></a><h2>Типовой договор</h2>

<p>Начиная с версии 2.9.8 в качестве стандартного договора с туристом в программе используется <a href="http://www.consultant.ru/law/hotdocs/49311.html/">Типовой договор</a>, утвержденный Минкультуры РФ.</p>

<p>Вы можете загрузить в программу шаблон старого договора, использовавшийся до версии 2.9.8, скачав его по <a href="old_contract.docx">этой ссылке</a>.</p>

<a name="order-template-changes"></a><h2>Изменения в шаблоне договора</h2>

<ul>
<li>Добавлена таблица <code>ВсеУслуги</code>, являющуюся объединением всех таблиц услуг <code>Авиабилеты</code>, <code>Проживание</code>, <code>Трансферы</code> и т.д.</li>
<li>В таблицу <code>Авиабилеты</code> теперь помещаются все услуги по авиаперелету, независимо от наличия или отсутствия детализации рейса. Авиаперелеты без детализации теперь находятся в таблице <code>Авиаперелеты</code>, а с детализацией - в таблице <code>АвиаперелетыСРейсом</code>.</li>
<li>Таблица <code>Трансферы</code> теперь выводит все услуги типа Трансфер, таблица <code>СтандартныеТрансферы</code> выводит только трансфер с двумя датами туда-обратно, таблица <code>ТрансферыПоДням</code> выводит трансферы, когда в заявки более одной услуги трансфера. Т.е., в таблице<code>ТрансферыПоДням</code> сейчас выводятся данные, которые до версии 2.9.8 выводились в таблице <code>Трансферы</code>.</li>
</ul>

<p>Таким образом:</p>

<p><code>Авиабилеты</code> = <code>Авиаперелеты</code> + <code>АвиаперелетыСРейсом</code></p>

<p><code>Трансферы</code> = <code>СтандартныеТрансферы</code> + <code>ТрансферыПоДням</code></p>

<a name="transfer-table-changes"></a><h5>Требуется коррекция ваших шаблонов!</h5>

<p>Во всех шаблонах документов заявки необходимо поменять источники таблиц с <code>Трансферы</code> на <code>ТрансферыПоДням</code>. Иначе "стандартные" трансферы будут выводиться два раза. Т.е., вместо старого объявления таблицы:</p>

<p>[Таблица источник=Трансферы]</p>

<p>должно быть следующее:</p>

<p>[Таблица источник=ТрансферыПоДням]</p>

<h5>Зачем нужно несколько разных таблиц для вывода услуг по авиаперелету и трансферам?</h5>

<p>Программа позволяет вводить данные типы услуг в двух режимах: простом и детализированном. По умолчанию, авиаперелет вводится в простом режиме, когда указывается полный маршрут и не указываются данные конкретных рейсов. Для трансферов простой режим действует, когда введена только одна услуга Трансфер в заявке. В таком случае, в поле описания также вводится полный маршрут туда-обратно и дополнительно указывается дата обратного трансфера. Распределение услуг по разным таблицам в зависимости от детализации позволяет в шаблоне определить два вида отображения списка услуг. Например, в детализированном варианте авиаперелета можно добавить колонку со временем вылета и колонку с другими параметрами авиаперелета, не доступными в простом варианте.</p>

<p>Для <a href="#recommended-contract">Типового договора</a> лучше использовать детализированный режим авиаперелета и трансфера, когда вводится полная информация об услуге. Детализированный режим для авиаперелета включается специальной галочкой "Детализация рейса", а для детализации трансфера достаточно добавить вторую услугу Трансфер, которая будет соответствовать обратному трансферу.</p>

<a name="new-functions"></a><h2>Новые функции для шаблонов: склонение ФИО, склонение названий городов, определение пола</h2>

<p>Добавлены функции для склонения ФИО и названий городов, а также функции для определения пола по имени или фамилии.<br>
Они доступны в шаблонах документов и в шаблонах смс.</p>

<h4>Склонение городов</h4>

<ul>
<li>ВГороде</li>
<li>ИзГорода</li>
<li>ВГород</li>
</ul>

<p>Функции <code>ВГороде</code>, <code>ИзГорода</code>, <code>ВГород</code> позволяют склонять названия городов. В качестве параметра передается название города в именительном падеже.</p>

<ul>
<li>["в " + ВГороде("Москва")]  &nbsp;&rarr;&nbsp;  "в Москве"</li>
<li>["из " + ИзГорода("Москва")]  &nbsp;&rarr;&nbsp;  "из Москвы"</li>
<li>["в " + ВГород("Москва")]  &nbsp;&rarr;&nbsp;  "в Москву"</li>
</ul>

<h5>Склонение имен и фамилий</h5>

<ul>
<li>ИмяРП</li>
<li>ИмяДП</li>
<li>ИмяВП</li>
<li>ИмяТП</li>
<li>ИмяПП</li>
<li>ФамилияРП</li>
<li>ФамилияДП</li>
<li>ФамилияВП</li>
<li>ФамилияТП</li>
<li>ФамилияПП</li>
<li>ОтчествоРП</li>
<li>ОтчествоДП</li>
<li>ОтчествоВП</li>
<li>ОтчествоТП</li>
<li>ОтчествоПП</li>
</ul>

<p>Функции <code>ИмяXX</code>, <code>ФамилияXX</code>, <code>ОтчествоXX</code> и <code>ФиоXX</code> склоняют, соответственно, имя, фамилию, отчество или ФИО полностью. Падеж определяется последними двумя буквами:</p>

<ul>
<li>РП <em class="explanation">&ndash; родительный падеж (от Иванова)</em></li>
<li>ДП <em class="explanation">&ndash; дательный падеж (к Иванову)</em></li>
<li>ВП <em class="explanation">&ndash; винительный падеж (за Иванова)</em></li>
<li>ТП <em class="explanation">&ndash; творительный падеж (с Ивановым)</em></li>
<li>ПП <em class="explanation">&ndash; предложный падеж (об Иванове)</em></li>
</ul>

<h5>Определение пола</h5>

<ul>
<li>Пол</li>
<li>ПолПоИмени</li>
<li>ПолПоФамилии</li>
</ul>

<p>Функции <code>Пол</code>, <code>ПолПоИмени</code> и <code>ПолПоФамилии</code> пытаются определить пол по ФИО, имени или фамилии. Возвращают строку <code>"Мужской"</code> или <code>"Женский"</code> в случае успешного определения. Если определить не удалось, возвращается пустая строка.</p>

<a name="instant-template-publishing"></a><h2>Мгновенное обновление шаблонов документов на всех компьютерах</h2>

<p>До версии 2.9.8 после публикации измененного шаблона договора (или другого документа) необходимо было ждать 1-2 минуты, пока обновленная версия не загрузится на компьютеры остальных пользователей программы. Также этот механизм был не надежен, и шаблон мог не обновиться.</p>

<p>В версии 2.9.8 модифицированный шаблон гарантированно будет загружен всем пользователям сразу же после нажатия кнопки Опубликовать.</p>

<a name="invoice-changes"></a><h2>Изменения в счете</h2>

<p>На форме <a href="../order/invoice/">Счета</a> добавлено поле "Скидка".</p>

<p>Добавлена таблица <code>УслугиИСкидка</code>, включающая кроме услуг еще строку со скидкой.</p>

<p>Добавлены следующие теги для шаблона Счета:</p>

<ul>
<li>[НомерЗаявки],</li>
<li>[ИнформацияОПлательщике],</li>
<li>[Телефон],</li>
<li>[Покупатель.Телефон],</li>
<li>[Покупатель.НомерДоговора],</li>
<li>[Покупатель.ДатаДоговора],</li>
<li>[Скидка],</li>
<li>[ИтогоБезСкидки].</li>
</ul>

<p>Добавлена возможность экспорта счета в <a href="https://its.1c.ru/db/metod8dev#content:5851:hdoc">формате 1С EnterpriseData</a> версии 1.4.</p>

<a name="block-access-to-reports"></a><h2>Опция закрытия доступа к отчетам</h2>

<p>Добавлена опция, позволяющая закрыть определенному пользователю доступ ко всем отчетам в программе.</p>

<p class="centered-image"> <img src="images/block_access_to_reports.png" alt="Закрытие доступа к отчетам" /></p>
<p>&nbsp;</p><p>&nbsp;</p><hr />

<p>Остались вопросы? Напишите нам на <a href="&#109;&#x61;&#x69;l&#x74;o&#58;&#x61;&#x67;e&#110;t&#x40;&#116;&#x6f;&#x75;&#x72;&#102;&#x78;&#46;&#x72;&#x75;?subject=%D0%92%D0%BE%D0%BF%D1%80%D0%BE%D1%81%20%D0%BF%D0%BE%20%D0%B4%D0%BE%D0%BA%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D0%B0%D1%86%D0%B8%D0%B8%3A%20%D0%98%D0%B7%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D1%8F%20%D0%B2%20%D0%B2%D0%B5%D1%80%D1%81%D0%B8%D0%B8%202.9.8">e-mail</a></p></div>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-36667707-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript">
(function (d, w, c) {
    (w[c] = w[c] || []).push(function() {
        try {
            w.yaCounter18497197 = new Ya.Metrika({id:18497197,
                    clickmap:true,
                    trackLinks:true,
                    accurateTrackBounce:true});
        } catch(e) { }
    });

    var n = d.getElementsByTagName("script")[0],
        s = d.createElement("script"),
        f = function () { n.parentNode.insertBefore(s, n); };
    s.type = "text/javascript";
    s.async = true;
    s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js";

    if (w.opera == "[object Opera]") {
        d.addEventListener("DOMContentLoaded", f, false);
    } else { f(); }
})(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="//mc.yandex.ru/watch/18497197" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->
</body>
</html>